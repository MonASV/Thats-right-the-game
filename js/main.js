const geographyCards = [
    {
        "cardNumber": 1,
        "question": "What is the name of the smallest country in the world?",
        "answer": "The Vatican City",
    },
    {
        "cardNumber": 2,
        "question": "What country are the Great Pyramids of Giza located in?",
        "answer": "Egypt",
    },
    {
        "cardNumber": 3,
        "question": "Which country has 'Dakar' as its capital??",
        "answer": "Senegal",
    },
    {
        "cardNumber": 4,
        "question": "What country does the Rhine River run through?",
        "answer": "Germany",
    },
    {
        "cardNumber": 5,
        "question": "Which country has the largest population in the world??",
        "answer": "China",
    },
    {
        "cardNumber": 6,
        "question": "What is the name of the largest country in the world?",
        "answer": "Russia",
    },
    {
        "cardNumber": 7,
        "question": "What country formerly ruled Iceland?",
        "answer": "Denmark",
    },
    {
        "cardNumber": 8,
        "question": "What country is known to have the best quality tap water?",
        "answer": "Switzerland",
    },
    {
        "cardNumber": 9,
        "question": "Which country is also called The Netherlands?",
        "answer": "Holland",
    }
]
const mathCards = [
    {
        "cardNumber": 1,
        "question": "When two circles have the same centre, what is it called?",
        "answer": "Concentric",
    },
    {
        "cardNumber": 2,
        "question": "How many configurations does a Rubik's Cube have?",
        "answer": "20",
    },
    {
        "cardNumber": 3,
        "question": "What is the longest side of the right-angle triangle called?",
        "answer": "Hypotenuse",
    },
    {
        "cardNumber": 4,
        "question": "Which number is spelt with letters in descending order?",
        "answer": "One",
    },
    {
        "cardNumber": 5,
        "question": "What is the smallest perfect number?",
        "answer": "6",
    },
    {
        "cardNumber": 6,
        "question": "Which number is known as the 'magic number'?",
        "answer": "9",
    },
    {
        "cardNumber": 7,
        "question": "How many colors are needed on a map to ensure that no 2 colors share the same border?",
        "answer": "4",
    },
    {
        "cardNumber": 8,
        "question": "What is zero to the power of zero?",
        "answer": "undefined",
    },
    {
        "cardNumber": 9,
        "question": "Which number always shows the same measurement in °C and °F?",
        "answer": "-40",
    }
]
const chemistryCards = [
    {
        "cardNumber": 1,
        "question": "Which element is used as a disinfectant, as a bleaching agent and to purify water?",
        "answer": "Chlorine",
    },
    {
        "cardNumber": 2,
        "question": "Chlorine, fluorine and bromine belong to which family of elements?",
        "answer": "Halogens",
    },
    {
        "cardNumber": 3,
        "question": "Which common mineral is used to make casts, molds, blackboard chalk and plaster of Paris?",
        "answer": "Gypsum",
    },
    {
        "cardNumber": 4,
        "question": "Pb is the chemical symbol for which element?",
        "answer": "Lead",
    },
    {
        "cardNumber": 5,
        "question": "Kimberlite contains what precious item?",
        "answer": "Diamonds 78",
    },
    {
        "cardNumber": 6,
        "question": "What is H2SO4 the chemical formula for?",
        "answer": "Sulfuric Acid",
    },
    {
        "cardNumber": 7,
        "question": "What raw material is used for making glass?",
        "answer": "Sand",
    },
    {
        "cardNumber": 8,
        "question": "What is the most common element in the Universe?",
        "answer": "Hydrogen",
    },
    {
        "cardNumber": 9,
        "question": "What is the chemical symbol for Potassium?",
        "answer": "K",
    }
]
const historyCards = [
    {
        "cardNumber": 1,
        "question": "How many U.S. presidents have been assassinated?",
        "answer": "Four",
    },
    {
        "cardNumber": 2,
        "question": "The ancient city of Rome was built on how many hills?",
        "answer": "Seven",
    },
    {
        "cardNumber": 3,
        "question": "How many times has the Mona Lisa been stolen?",
        "answer": "One",
    },
    {
        "cardNumber": 4,
        "question": "The Great Pyramids of Giza consist of how many pyramids?",
        "answer": "Three",
    },
    {
        "cardNumber": 5,
        "question": "The Ptolemy dynasty ruled which ancient kingdom?",
        "answer": "Egypt",
    },
    {
        "cardNumber": 6,
        "question": "In which country did the Easter Rising take place in 1916?",
        "answer": "Ireland",
    },
    {
        "cardNumber": 7,
        "question": "Where were the first modern Olympics held?",
        "answer": "Greece",
    },
    {
        "cardNumber": 8,
        "question": "The Incan Empire is located in which modern-day country?",
        "answer": "Peru",
    },
    {
        "cardNumber": 9,
        "question": "In which country was the largest known T-Rex skeleton found?",
        "answer": "Canada",
    }


]
const artCards = [
    {
        "cardNumber": 1,
        "question": "Vincent Van Gogh had an older brother who died at birth. What was his name?",
        "answer": "Vincent",
    },
    {
        "cardNumber": 2,
        "question": "Which artist died poor but became incredibly rich after his death?",
        "answer": "Vincent Van Gogh",
    },
    {
        "cardNumber": 3,
        "question": "Which famous abstract artist was blamed for stealing the “Mona Lisa”?",
        "answer": "Pablo Picasso",
    },
    {
        "cardNumber": 4,
        "question": "Which Renaissance artist is the most famous procrastinator of all time?",
        "answer": "Leonardo da Vinci",
    },
    {
        "cardNumber": 5,
        "question": "This painter continued his work despite having crippling arthritis.",
        "answer": "Pierre-Auguste Renoir",
    },
    {
        "cardNumber": 6,
        "question": "Which artist is famous for Pop Art?",
        "answer": "Andy Warhol",
    },
    {
        "cardNumber": 7,
        "question": "Which Italian architect and sculptor was famous for creating the Baroque style?",
        "answer": "Raffaello Sanzio da Urbino, aka Raphael",
    },
    {
        "cardNumber": 8,
        "question": "Which famous painter cut off a part of his ear?",
        "answer": "Vincent Van Gogh",
    },
    {
        "cardNumber": 9,
        "question": "Which Spanish painter is referred to as both the last of the old masters and the moderns?",
        "answer": "Francisco Goya",
    }
]
const sportCards = [
    {
        "cardNumber": 1,
        "question": "What sport is best known as the 'king of sports'?",
        "answer": "Soccer",
    },
    {
        "cardNumber": 2,
        "question": "What's the national sport of Canada?",
        "answer": "Lacrosse",
    },
    {
        "cardNumber": 3,
        "question": "In what game is “love” a score?",
        "answer": "Tennis",
    },
    {
        "cardNumber": 4,
        "question": "What sport is a lot like softball?",
        "answer": "Baseball",
    },
    {
        "cardNumber": 5,
        "question": "Which sport uses a net, a racket, and a shuttlecock?",
        "answer": "Badminton",
    },
    {
        "cardNumber": 6,
        "question": "What sport is called the “sport of kings”?",
        "answer": "Polo",
    },
    {
        "cardNumber": 7,
        "question": "What sport starts with a tip-off or jump ball?",
        "answer": "Basketball",
    },
    {
        "cardNumber": 8,
        "question": "In which winter sport are the terms “stale fish” and “mule kick” used?",
        "answer": "Snowboarding",
    },
    {
        "cardNumber": 9,
        "question": "Which winter sport was already practiced 3000 years BC?",
        "answer": "Ski",
    }
]
const musicCards = [
    {
        "cardNumber": 1,
        "question": "Which singer 'can't stop staring at those ocean eyes'?",
        "answer": "Billie Eilish",
    },
    {
        "cardNumber": 2,
        "question": "Who is the best-selling female artist of all time?",
        "answer": "Madonna",
    },
    {
        "cardNumber": 3,
        "question": "The Barbadian singer Robyn Fenty is better known by her middle name of what?",
        "answer": "Rihanna",
    },
    {
        "cardNumber": 4,
        "question": "Which American pop star had back to back 2015 chart success with singles 'Sorry' and 'Love Yourself'?",
        "answer": "Justin Bieber",
    },
    {
        "cardNumber": 5,
        "question": "American singer Stefani Joanne Angelina Germanotta is best known by which stagename?",
        "answer": "Lady Gaga",
    },
    {
        "cardNumber": 6,
        "question": "Which artist is also known as Slim Shady?",
        "answer": "Enimem",
    },
    {
        "cardNumber": 7,
        "question": "Who sang with the Wailers?",
        "answer": "Bob Marley",
    },
    {
        "cardNumber": 8,
        "question": "Which artist has the best-selling album 'Goodbye Yellow Brick Road'?",
        "answer": "Elton John",
    },
    {
        "cardNumber": 9,
        "question": "'Bad Blood', 'Love Story', and 'Cardigan' are hits for which best-selling American singer?",
        "answer": "Taylor Swift",
    }
]
const moviesCards = [
    {
        "cardNumber": 1,
        "question": "What movie has the highest on-screen body count of all time?",
        "answer": "The Lord of the Rings",
    },
    {
        "cardNumber": 2,
        "question": "Which iconic movie franchise has been around for even longer than James Bond?",
        "answer": "Godzilla",
    },
    {
        "cardNumber": 3,
        "question": "What was the first movie to use digital de-aging?",
        "answer": "X-Men",
    },
    {
        "cardNumber": 4,
        "question": "Which movie had the first post-credits scene of all time?",
        "answer": "The Silencers",
    },
    {
        "cardNumber": 5,
        "question": "What was Scream originally called?",
        "answer": "Scary Movie",
    },
    {
        "cardNumber": 6,
        "question": "What's the longest director's cut of all time?",
        "answer": "Until the End of the World",
    },
    {
        "cardNumber": 7,
        "question": "What's the least expensive movie to earn over $1 billion globally?",
        "answer": "Joker",
    },
    {
        "cardNumber": 8,
        "question": "Which Shakespeare play has the most movie adaptations?",
        "answer": "Hamlet",
    },
    {
        "cardNumber": 9,
        "question": "What was the first-ever feature-length film shot entirely in color?",
        "answer": "With Our King and Queen Through India",
    }
]
const javaScriptCards = [
    {
        "cardNumber": 1,
        "question": "0.1 + 0.2 == ",
        "answer": "0.30000000000000004",
    },
    {
        "cardNumber": 2,
        "question": "1.1 + 10000000000000000 == ",
        "answer": "10000000000000002",
    },
    {
        "cardNumber": 3,
        "question": "[1, 2, 3] + [4, 5, 6] == ",
        "answer": "[1, 2, 34, 5, 6]",
    },
    {
        "cardNumber": 4,
        "question": "'5' — 3 = 2 && '5' + 3 == ",
        "answer": "53",
    },
    {
        "cardNumber": 5,
        "question": "true + true ==",
        "answer": " 2",
    },
    {
        "cardNumber": 6,
        "question": "Math.min() > Math.max()",
        "answer": "True",
    },
    {
        "cardNumber": 7,
        "question": "'2' + '2' == ",
        "answer": "'22'",
    },
    {
        "cardNumber": 8,
        "question": "true == 'true'",
        "answer": "False",
    },
    {
        "cardNumber": 9,
        "question": "010 - 03 == ",
        "answer": "05",
    }
]
const cardByCategory = {
    history: historyCards,
    geography: geographyCards,
    math: mathCards,
    chemistry: chemistryCards,
    art: artCards,
    sport: sportCards,
    music: musicCards,
    movies: moviesCards,
    javaScript: javaScriptCards

}
const gameCategories = [
    {
        categoryName: "Geography",
        link: "./geography.html",
        imagePath: "geography"
    },
    {
        categoryName: "History",
        link: "./history.html",
        imagePath: "history"
    },
    {
        categoryName: "Math",
        link: "./math.html",
        imagePath: "math"
    },
    {
        categoryName: "Chemistry",
        link: "./chemistry.html",
        imagePath: "chemistry"
    },
    {
        categoryName: "Sport",
        link: "./sport.html",
        imagePath: "sport"
    },
    {
        categoryName: "Music",
        link: "./music.html",
        imagePath: "music"
    },
    {
        categoryName: "Art",
        link: "./art.html",
        imagePath: "art"
    },
    {
        categoryName: "Movies",
        link: "./movies.html",
        imagePath: "movies"
    },
    {
        categoryName: "JavaScript",
        link: "./javaScript.html",
        imagePath: "javaScript"
    }
]


class Card {
    constructor(cardObj) {
        this.cardObj = cardObj
        this.width = 20;
        this.height = 20;
        this.domElement = null;



        this.createDomElement();

    }

    createDomElement() {
        this.domElement = document.createElement("div");

        this.domElement.id = `${this.cardObj.cardNumber}`
        this.domElement.className = "card";

        this.domElement.style.width = this.width + "vw";
        this.domElement.style.height = this.height + "vh";


        this.domElement.innerHTML = `
            <div id="text-container${this.cardObj.cardNumber}">
                <div class="front">${this.cardObj.question}</div>
                <div id="question${this.cardObj.cardNumber}" class="drop-area"></div>
                
            </div>
        `;


        const myBoard = document.getElementById("board");
        myBoard.appendChild(this.domElement);
        ;
    };

    createDropElement() {
        this.dropElement = document.createElement("div");
        this.dropElement.classList.add("drop-area");

        const myCard = document.getElementsByClassName('card')
        myCard.appendChild(this.dropElement)
    }

}

class Button {
    constructor() {
        this.domElement = null;
        this.createDomElement();
    }
    createDomElement() {
        this.domElement = document.createElement("div")
        this.domElement.id = "review";

        this.domElement.innerHTML =
            `<button type="submit">Review</button>`

        const parentElm = document.getElementById("possible-answers");
        parentElm.appendChild(this.domElement);
    }
}

class Review {
    constructor(myCards) {
        this.cards = myCards;
        this.domElement = null;
    }


    checkResults() {
        let points = 0;

        this.cards.forEach((card) => {

            const answerArea = document.getElementById(`question${card.cardNumber}`)
            const chosenBox = answerArea.querySelector(".answers-box")

            if (chosenBox !== null) {

                const choice = chosenBox.id

                if (choice.slice(-1) == card.cardNumber) {
                    points++;

                    document.getElementById(`${card.cardNumber}`).style.backgroundImage = `url('./images/correct.jpg')`;

                } else {
                    document.getElementById(`${card.cardNumber}`).style.backgroundImage = `url('./images/wrong.png')`;
                }
            }


            else {
                document.getElementById(`${card.cardNumber}`).style.backgroundImage = `url('./images/wrong.png')`;
            }
        })

        return points

    }

    printResults() {
        const points = this.checkResults()
        this.domElement = document.createElement("div")
        this.domElement.id = "results";
        
        this.domElement.innerHTML =
            `<div>Correct answers: ${points}</div>
            <button onclick="window.location.href='./index.html'">Play another sprint</button>
            <button onclick="window.location.reload()">Try again</button>`

        const parentElm = document.getElementById("possible-answers");
        parentElm.appendChild(this.domElement);

    }
}

class Answers {
    constructor(myCard) {
        this.card = myCard
        this.width = 10;
        this.height = 5;
        this.domElement = null;



        this.createDomElement();

    }

    createDomElement() {

        this.domElement = document.createElement("div");


        this.domElement.id = `answers${this.card.cardNumber}`;
        this.domElement.classList.add('answers-box');
        this.domElement.draggable = true;

        this.domElement.style.width = this.width + "vw";
        this.domElement.style.height = this.height + "vh";
        this.domElement.innerHTML = this.card.answer;

        const myBoard = document.getElementById("possible-answers");
        myBoard.appendChild(this.domElement);

    };

    makeDroppable() {
        let answerBox = this.domElement;
        let originBoard = document.getElementById("possible.answers");
        let targets = document.getElementsByClassName("drop-area");

        answerBox.addEventListener("dragstart", function (e) {
            let selected = e.target;

            Array.from(targets).forEach((target) => {
                target.addEventListener("dragover", function (e) {
                    e.preventDefault();
                });
                target.addEventListener("drop", function (e) {
                    target.appendChild(selected);
                    selected = null;
                })

            })


        })
    }


}

class Game {

    constructor(category) {
        this.category = category
        this.cards = cardByCategory[category]
    }
    initialize() {

        const myCards = [];

        window.addEventListener("load", (event) => {
            this.cards.sort((a, b) => Math.random() > 0.5 ? 1 : -1)
            this.cards.forEach((cardObj) => {
                const card = new Card(cardObj);
                myCards.push(cardObj)
            })

            this.cards.sort((a, b) => Math.random() > 0.5 ? 1 : -1)
            this.cards.forEach((cardObj) => {
                const answers = new Answers(cardObj);
                answers.makeDroppable()
            })

            const button = new Button();
            const review = new Review(myCards);
            button.domElement.addEventListener("click", () => {
                review.printResults();

            })
            setTimeout(() => {
                review.printResults()
            }, "120000")
            setTimeout(() => {
                let lastSound = new Audio('./music/15seconds.mp3');
                lastSound.play();
            }, "103000")

        })
    }

}

class GameTile {
    constructor(category) {
        this.category = category
        this.width = 20;
        this.height = 20;
        this.domElement = null;

        let myAudio = document.querySelector('#audio')
        myAudio.play()

        this.createDomElement();

    }


    createDomElement() {
        this.domElement = document.createElement("div");

        this.domElement.className = "category";


        this.domElement.style.width = this.width + "vw";
        this.domElement.style.height = this.height + "vh";
        this.domElement.style.backgroundImage = `url('./images/${this.category.imagePath}.jpeg')`;

        this.domElement.innerHTML = `
        
        <div class="category-text">${this.category.categoryName}</div>
        
        
        `;

        const myBoard = document.getElementById("board1");
        myBoard.appendChild(this.domElement);

        this.domElement.addEventListener("click", () => {


            location.href = this.category.link



        });
    };
}

if (!location.pathname.endsWith(".html")) {
    location.href = "./index.html"
}

if (location.pathname.endsWith("index.html")) {
    gameCategories.forEach((category) => {
        new GameTile(category);

    })
}
else {
    const category = location.pathname.match(/.*\/(.*).html$/)[1]
    const game = new Game(category)
    game.initialize()
    const imagePath = `./images/${category}.jpeg`
    document.body.style.backgroundImage = "url(" + `${imagePath}` + ")"
    const musicPath = `./music/${category}.mp3`
    let mySound = new Audio(musicPath);
    mySound.play();
    mySound.loop = true;
    mySound.volume = 0.5
    setTimeout(() => {
        mySound.pause();
    }, "102999")

}

